<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{template1}">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Attribution Demande</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css" integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz" crossorigin="anonymous">
</head>

<body>
<div layout:fragment="content">
    <div class="container my-2">
        <div class="card">
            <div class="card-body">
                 <div th:switch="${attributions}" class="container my-5">
                 	
                 	<form th:action="@{consulterDemande}" methode="get" th:if="${demande} == null">
                 		<div>
                 			<label>Saisir le numero du demande à consulter</label>
                 			<input type="number" name="numeroDemande"/>
                 			<button type="submit" class="btn btn-primary">chercher</button>
                 		</div>
                 	</form>
                 	
                 	<div class="panel panel-primary" th:if="${demande} != null">
                 		<div class="panel-heading"><h1>Demande information</h1></div>
                 			<div class="panel-body">
                 				<div>
                 					<label><b>Numero Demande:</b></label>
                 					<label th:text="${demande.numeroDemande}"></label>
                 				</div>
                 				<div>
                 					<label><b>Type Franchise:</b></label>
                 					<label th:text="${demande.getTypeFranchise().code}"></label>
                 				</div>
                 				<div>
                 					<label><b>Designation Type Franchise:</b></label>
                 					<label th:text="${demande.getTypeFranchise().designation}"></label>
                 				</div>
                 				<div>
                 					<label><b>Requérant:</b></label>
                 					<label th:text="${demande.getRequerant().nom}"></label>
                 				</div>
                 				
                 				<div>
                 					<label><b>Renseignement Requérant:</b></label>
                 					<label th:text="${demande.getRequerant().renseignement}"></label>
                 				</div>
                 				<div>
                 					<label><b>Motif de la demande:</b></label>
                 					<label th:text="${demande.motif}"></label>
                 				</div>
                 				<div>
                 					<label><b>Bureau:</b></label>
                 					<label th:text="${demande.getFcuo().nom}"></label>
                 				</div>
                 				<div>
                 					<label><b>Sigle Bureau:</b></label>
                 					<label th:text="${demande.getFcuo().sigle}"></label>
                 				</div>
                 				<div>
                 					<label><b>Marchandise:</b></label>
                 					<label th:text="${demande.getMarchandise().nom}"></label>
                 				</div>
                 				<div>
                 					<label><b>Description Marchandise:</b></label>
                 					<label th:text="${demande.getMarchandise().description}"></label>
                 				</div>
                 				<div>
                 					<label><b>Etat de demande:</b></label>
                 					<label th:text="${demande.EtatDemande}"></label>
                 				</div>
                 				
                 				<div>
                 					<label><b>Date de dépot:</b></label>
                 					<label th:text="${demande.dateDepot}"></label>
                 				</div>
                 				
                 			</div>
                 	</div>
                 	
                 
                    <p class="my-5">
                        <a href="/attributions/signup" class="btn btn-primary"><i
       class="fas fa-user-plus ml-2"> Add Attribution</i></a>
                    </p>
                    <div class="col-md-10">
                       <!--   <h2 th:if="${attributions} == null">No Attribution yet!</h2> -->
                        <div th:if="${attributions} != null">
                        <label><b>Historique</b></label>
                            <table class="table table-striped table-responsive-md">
                                <thead>
                                    <tr>
                                    	<th>Numero Demande</th>
                                    	<th>Observation</th>
                                    	<th>Etat demande</th>
                                    	<th>Agent detenteur</th>                               
                                        <th>Envoyer au</th>
                                        <th>Presence</th>
                                        <th>Date d'attribution</th>
                                        
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr th:each="attribution : ${attributions}">
                                        <!--  </td>
                                        <td th:text="${attribution.getMotif().nom}"></td>-->
                                        <td th:text="${attribution.getDemande().numeroDemande}">
                                        <td th:text="${attribution.observation}">
                                        <td th:text="${attribution.etatDemande}">
                                        <td th:text="${attribution.agentDetenteur.role}">
                                        <td th:text="${attribution.agentReceveur.role}">
                                        <td th:text="${attribution.demande.presence}">
                                        <td th:text="${attribution.date}">
                                     
                                    </tr>
                                </tbody>
                            </table>
                            </div>
                            </div>
                            </div>
                            </div>
        </div>
    </div>
    </div> 
</body>

</html>